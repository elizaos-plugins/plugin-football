{"version":3,"sources":["../src/actions/fetchMatchAction.ts","../src/actions/fetchStandingsAction.ts","../src/index.ts"],"sourcesContent":["import {\n    type Action,\n    type HandlerCallback,\n    type IAgentRuntime,\n    type Memory,\n    type State,\n    elizaLogger,\n} from \"@elizaos/core\";\n\nexport const fetchMatchAction: Action = {\n    name: \"FETCH_MATCH\",\n    similes: [\"LIVE_MATCH\", \"GET_SCORE\", \"FETCH_MATCH\"],\n    description: \"Fetch live match scores and events\",\n    validate: async (\n        runtime: IAgentRuntime,\n        _message: Memory,\n        _state?: State,\n    ) => {\n        const apiKey = runtime.getSetting(\"FOOTBALL_API_KEY\");\n        return !!apiKey;\n    },\n    handler: async (\n        runtime: IAgentRuntime,\n        _message: Memory,\n        _state?: State,\n        _options?: { [key: string]: unknown },\n        callback?: HandlerCallback,\n    ): Promise<boolean> => {\n        try {\n            const apiKey = runtime.getSetting(\"FOOTBALL_API_KEY\");\n            const apiUrl = \"https://api.football-data.org/v4/matches\";\n\n            const response = await fetch(apiUrl, {\n                headers: { \"X-Auth-Token\": apiKey },\n                signal: AbortSignal.timeout(5000),\n            });\n\n            if (!response.ok) {\n                elizaLogger.error(\n                    \"Error fetching live match data:\",\n                    response.statusText,\n                );\n                callback({\n                    text: \"Error fetching live match data:\",\n                    action: \"FETCH_MATCH\",\n                });\n                return false;\n            }\n\n            const matchData = await response.json();\n            elizaLogger.log(\"Fetched match data:\", matchData);\n\n            callback(\n                {\n                    text: `Football match data fetched successfully:\n                    - Matches found: ${matchData.resultSet.count}\n                    - Competitions: ${matchData.resultSet.competitions}\n                    - Date range: ${matchData.filters.dateFrom} to ${matchData.filters.dateTo}\n\n                    Match Results:\n                    ${matchData.matches\n                        .map(\n                            (match) => `\n                    ${match.competition.name}\n                    ${match.homeTeam.name} ${match.score.fullTime.home} - ${match.score.fullTime.away} ${match.awayTeam.name}\n                    Status: ${match.status}\n                    `,\n                        )\n                        .join(\"\\n\")}`,\n                },\n                [],\n            );\n\n            return true;\n        } catch (error) {\n            elizaLogger.error(\"Error in fetchMatchAction:\", error);\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What's the score of the Chelsea vs Arsenal match?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"The latest score is Chelsea 1-2 Arsenal, full-time.\",\n                    action: \"FETCH_MATCH\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Give me the latest score for today's match!\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Sure! Let me check the live match details.\",\n                    action: \"FETCH_MATCH\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What's the score in the Premier League game?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"The score for the Premier League match is 2-1 in favor of Manchester United, full-time.\",\n                    action: \"FETCH_MATCH\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"What's the score for today's matches?\" },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Here are today's live scores for the matches:\",\n                    action: \"FETCH_MATCH\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Tell me the score for Arsenal vs Chelsea.\" },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Fetching the live score for Arsenal vs Chelsea...\",\n                    action: \"FETCH_MATCH\",\n                },\n            },\n        ],\n    ],\n};\n","import type { HandlerCallback } from \"@elizaos/core\";\nimport {\n    type Action,\n    type IAgentRuntime,\n    type Memory,\n    type State,\n    elizaLogger,\n} from \"@elizaos/core\";\n\nconst TIMEOUT_MS = 5000;\nconst RATE_LIMIT_WINDOW_MS = 60000;\nlet lastRequestTime = 0;\n\nexport const fetchStandingsAction: Action = {\n    name: \"FETCH_STANDINGS\",\n    similes: [\"GET_TABLE\", \"LEAGUE_STANDINGS\"],\n    description: \"Fetch current league standings\",\n    validate: async (\n        runtime: IAgentRuntime,\n        _message: Memory,\n        _state?: State,\n    ) => {\n        const apiKey = runtime.getSetting(\"FOOTBALL_API_KEY\");\n        return !!apiKey;\n    },\n    handler: async (\n        runtime: IAgentRuntime,\n        _message: Memory,\n        _state?: State,\n        _options?: { [key: string]: unknown },\n        callback?: HandlerCallback,\n    ): Promise<boolean> => {\n        try {\n            const league = runtime.getSetting(\"LEAGUE_ID\") || \"PL\";\n            const apiKey = runtime.getSetting(\"FOOTBALL_API_KEY\");\n\n            if (!apiKey?.match(/^[a-f0-9]{32}$/i)) {\n                elizaLogger.error(\"Invalid API key format\");\n                return false;\n            }\n\n            const now = Date.now();\n            if (now - lastRequestTime < RATE_LIMIT_WINDOW_MS) {\n                elizaLogger.error(\"Rate limit exceeded\");\n                return false;\n            }\n            lastRequestTime = now;\n\n            const apiUrl = `https://api.football-data.org/v4/competitions/${league}/standings`;\n\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => controller.abort(), TIMEOUT_MS);\n\n            const response = await fetch(apiUrl, {\n                headers: { \"X-Auth-Token\": apiKey },\n                signal: controller.signal,\n            });\n\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                elizaLogger.error(\n                    \"Error fetching standings data:\",\n                    response.statusText,\n                );\n                callback({\n                    text: \"Error fetching standings data:\",\n                    action: \"FETCH_STANDINGS\",\n                });\n                return false;\n            }\n\n            const standingsData = await response.json();\n            callback(\n                {\n                    text: `Football standings data fetched successfully:\n                    - Result: ${JSON.stringify(standingsData, null, 2)}`,\n                },\n                [],\n            );\n\n            return;\n        } catch (error) {\n            elizaLogger.error(\"Error in fetchStandingsAction:\", error);\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What are the current standings in the Premier League?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"The top 2 teams are: 1. Manchester City - 45 points, 2. Arsenal - 42 points.\",\n                    action: \"FETCH_STANDINGS\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Give me the table for La Liga\" },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"The top 3 teams in La Liga are: 1. Barcelona, 2. Real Madrid, 3. Atletico Madrid.\",\n                    action: \"FETCH_STANDINGS\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Check the Serie A table for me.\" },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Serie A current standings: Juventus 1st, AC Milan 2nd, Inter Milan 3rd.\",\n                    action: \"FETCH_STANDINGS\",\n                },\n            },\n        ],\n    ],\n};\n","import type { Plugin } from \"@elizaos/core\";\nimport { fetchMatchAction } from \"./actions/fetchMatchAction\";\nimport { fetchStandingsAction } from \"./actions/fetchStandingsAction\";\n\nexport const footballPlugin: Plugin = {\n    name: \"football\",\n    description:\n        \"Football data plugin to fetch live scores, standings, and fixtures\",\n    actions: [fetchMatchAction, fetchStandingsAction],\n};\nexport default footballPlugin;\n"],"mappings":";AAAA;AAAA,EAMI;AAAA,OACG;AAEA,IAAM,mBAA2B;AAAA,EACpC,MAAM;AAAA,EACN,SAAS,CAAC,cAAc,aAAa,aAAa;AAAA,EAClD,aAAa;AAAA,EACb,UAAU,OACN,SACA,UACA,WACC;AACD,UAAM,SAAS,QAAQ,WAAW,kBAAkB;AACpD,WAAO,CAAC,CAAC;AAAA,EACb;AAAA,EACA,SAAS,OACL,SACA,UACA,QACA,UACA,aACmB;AACnB,QAAI;AACA,YAAM,SAAS,QAAQ,WAAW,kBAAkB;AACpD,YAAM,SAAS;AAEf,YAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,QACjC,SAAS,EAAE,gBAAgB,OAAO;AAAA,QAClC,QAAQ,YAAY,QAAQ,GAAI;AAAA,MACpC,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AACd,oBAAY;AAAA,UACR;AAAA,UACA,SAAS;AAAA,QACb;AACA,iBAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ,CAAC;AACD,eAAO;AAAA,MACX;AAEA,YAAM,YAAY,MAAM,SAAS,KAAK;AACtC,kBAAY,IAAI,uBAAuB,SAAS;AAEhD;AAAA,QACI;AAAA,UACI,MAAM;AAAA,uCACa,UAAU,UAAU,KAAK;AAAA,sCAC1B,UAAU,UAAU,YAAY;AAAA,oCAClC,UAAU,QAAQ,QAAQ,OAAO,UAAU,QAAQ,MAAM;AAAA;AAAA;AAAA,sBAGvE,UAAU,QACP;AAAA,YACG,CAAC,UAAU;AAAA,sBACjB,MAAM,YAAY,IAAI;AAAA,sBACtB,MAAM,SAAS,IAAI,IAAI,MAAM,MAAM,SAAS,IAAI,MAAM,MAAM,MAAM,SAAS,IAAI,IAAI,MAAM,SAAS,IAAI;AAAA,8BAC9F,MAAM,MAAM;AAAA;AAAA,UAElB,EACC,KAAK,IAAI,CAAC;AAAA,QACnB;AAAA,QACA,CAAC;AAAA,MACL;AAEA,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,kBAAY,MAAM,8BAA8B,KAAK;AACrD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,QACV;AAAA,MACJ;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,QACV;AAAA,MACJ;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,QACV;AAAA,MACJ;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS,EAAE,MAAM,wCAAwC;AAAA,MAC7D;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS,EAAE,MAAM,4CAA4C;AAAA,MACjE;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACJ;;;ACvJA;AAAA,EAKI,eAAAA;AAAA,OACG;AAEP,IAAM,aAAa;AACnB,IAAM,uBAAuB;AAC7B,IAAI,kBAAkB;AAEf,IAAM,uBAA+B;AAAA,EACxC,MAAM;AAAA,EACN,SAAS,CAAC,aAAa,kBAAkB;AAAA,EACzC,aAAa;AAAA,EACb,UAAU,OACN,SACA,UACA,WACC;AACD,UAAM,SAAS,QAAQ,WAAW,kBAAkB;AACpD,WAAO,CAAC,CAAC;AAAA,EACb;AAAA,EACA,SAAS,OACL,SACA,UACA,QACA,UACA,aACmB;AACnB,QAAI;AACA,YAAM,SAAS,QAAQ,WAAW,WAAW,KAAK;AAClD,YAAM,SAAS,QAAQ,WAAW,kBAAkB;AAEpD,UAAI,CAAC,QAAQ,MAAM,iBAAiB,GAAG;AACnC,QAAAA,aAAY,MAAM,wBAAwB;AAC1C,eAAO;AAAA,MACX;AAEA,YAAM,MAAM,KAAK,IAAI;AACrB,UAAI,MAAM,kBAAkB,sBAAsB;AAC9C,QAAAA,aAAY,MAAM,qBAAqB;AACvC,eAAO;AAAA,MACX;AACA,wBAAkB;AAElB,YAAM,SAAS,iDAAiD,MAAM;AAEtE,YAAM,aAAa,IAAI,gBAAgB;AACvC,YAAM,YAAY,WAAW,MAAM,WAAW,MAAM,GAAG,UAAU;AAEjE,YAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,QACjC,SAAS,EAAE,gBAAgB,OAAO;AAAA,QAClC,QAAQ,WAAW;AAAA,MACvB,CAAC;AAED,mBAAa,SAAS;AAEtB,UAAI,CAAC,SAAS,IAAI;AACd,QAAAA,aAAY;AAAA,UACR;AAAA,UACA,SAAS;AAAA,QACb;AACA,iBAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ,CAAC;AACD,eAAO;AAAA,MACX;AAEA,YAAM,gBAAgB,MAAM,SAAS,KAAK;AAC1C;AAAA,QACI;AAAA,UACI,MAAM;AAAA,gCACM,KAAK,UAAU,eAAe,MAAM,CAAC,CAAC;AAAA,QACtD;AAAA,QACA,CAAC;AAAA,MACL;AAEA;AAAA,IACJ,SAAS,OAAO;AACZ,MAAAA,aAAY,MAAM,kCAAkC,KAAK;AACzD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,QACV;AAAA,MACJ;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS,EAAE,MAAM,gCAAgC;AAAA,MACrD;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,IACA;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS,EAAE,MAAM,kCAAkC;AAAA,MACvD;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACJ;;;AC9HO,IAAM,iBAAyB;AAAA,EAClC,MAAM;AAAA,EACN,aACI;AAAA,EACJ,SAAS,CAAC,kBAAkB,oBAAoB;AACpD;AACA,IAAO,gBAAQ;","names":["elizaLogger"]}